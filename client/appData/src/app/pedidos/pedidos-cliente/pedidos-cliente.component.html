
  <br>  <br>  <br>
<div class="card">
<div class="card-header card-header-warning" >
<h4 class="card-title">Pedidos</h4>
</div>
<div class="mat-elevation-z8" >
  <table mat-table [dataSource]="dataSource" class="table" matSort aria-label="Elements" style="background-color:#fff;" >
    <!-- Columna nombre -->

     <ng-container matColumnDef="fechaOrden">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="titulo">Fecha de Orden</th>
      <td mat-cell *matCellDef="let row">{{ row.fechaOrden | date:'dd MMM yyyy' }}</td>

    </ng-container>

    <ng-container matColumnDef="usuarioId">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="titulo">Vendedor</th>
      <td mat-cell *matCellDef="let row">{{ row.ordenProductos[0].producto.usuario.nombre + ' ' + row.ordenProductos[0].producto.usuario.primerApellido + ' ' + row.ordenProductos[0].producto.usuario.segundoApellido  }}</td>
    </ng-container>

    <ng-container matColumnDef="cantidad">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="titulo">Cantidad</th>
      <td mat-cell *matCellDef="let row">{{calculateCantidad(row) + ' ' + '(Pares de zapatos)'}}</td>
    </ng-container>

  <div class="totalOrden">
    <ng-container matColumnDef="totalOrden">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="titulo">Subtotal de la Orden</th>
      <td mat-cell *matCellDef="let row" >{{ calculateTotal(row) | currency : '₡' }}</td>
    </ng-container>              
  </div>

    <ng-container matColumnDef="estado">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="titulo">Estado de Orden</th>
      <td mat-cell *matCellDef="let row">
        <div class="finalizado" style="margin-right: 55%;">
          <ng-container *ngIf="row.estado === 1; else pendiente">
            Finalizado
          </ng-container>
        </div>
        <div class="pendiente"  style="margin-right: 55%;">
        <ng-template #pendiente>
          Pendiente
        </ng-template>
      </div>
      </td>
    </ng-container>    
    <!-- Columna acciones -->
    <ng-container matColumnDef="acciones">
      <th mat-header-cell *matHeaderCellDef class="titulo">Acciones</th>
      <td mat-cell *matCellDef="let row">
        <a
          mat-fab
          matTooltip="Actualizar"
          aria-label="Actualizar"
          color="primary"
        >
        <mat-icon class="square-icon">edit</mat-icon>

        </a>
        <a
          mat-fab
          matTooltip="Detalle"
          aria-label="Detalle"
          color="primary"
          (click)="detalleOrden(row.id)"
        >
          <mat-icon class="squar">info</mat-icon>
        </a>
      </td>
    </ng-container>
    
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>

  <mat-paginator class="paginator"

    #paginator
    [length]="dataSource?.data?.length"
    [pageIndex]="0"
    [pageSize]="4"
    [pageSizeOptions]="[4, 8, 12]"
    aria-label="Seleccione una página"
  >
  </mat-paginator>
</div>
</div>
<br>

